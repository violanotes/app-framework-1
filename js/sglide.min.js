/*
sGlide is a Javascript plugin that generates a simple, highly flexible, feature-rich & mobile-ready slider.
Copyright (C) 2014  Daniel Kazmer
See <http://www.gnu.org/licenses/gpl.html>

author:		Daniel Kazmer - http://webshifted.com/sGlide
created:	16.11.2012
version:	2.2.0
*/
function sGlide(e,t){function n(e){switch(e[0]){case"#":return document.getElementById(e.substr(1));case".":return document.getElementsByClassName(e.substr(1));default:return document.getElementsByTagName(e)}}function i(e,t){var n=document.createElement("div");n.innerHTML=t;var i=n.childNodes[0];e[0].parentNode.insertBefore(i,e[0]);for(var r=0;r<e.length;r++)i.appendChild(e[r])}function r(e){if(null===e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=r(e[n]));return t}function o(e,t,n){var i=n?t:{};for(var r in e)if(t[r]instanceof Array){i[r]=[];for(var a=0;a<t[r].length;a++)"object"==typeof t[r][a]?o(e[r][a],t[r][a]):i[r].push(t[r][a])}else"object"==typeof t[r]?i[r]=o(e[r],t[r]):i[r]=void 0===t[r]?e[r]:t[r];return i}function a(e,t,n){var i=e.getAttribute("style")?e.getAttribute("style").split(";"):[],r={},a=null;if(n){var s={};for(var d in t)if(t.hasOwnProperty(d))for(var l=0;l<n.length;l++)s[n[l]+d]=t[d];t=s}for(var u=0;u<i.length&&(a=i[u].split(":"),!(a.length<2));u++)r[a[0].trim()]=a[1].trim();0===Object.keys(r).length&&(r=t);var f=JSON.stringify(o(r,t,!0)).replace(/\{*\}*"*/g,"").replace(/,/g,"; ")||"";e.setAttribute("style",f.trim())}var s=null,d=null,l=0,u="",f=!1,v=!1,h=!1,c=!1,p=!1,m=null,g=null,b=null,w=null,y=null,x=null,k=null,E=null,L=null,A=null,M=null,T=null,W={down:"mousedown",up:"mouseup",move:"mousemove"};uAgent=navigator.userAgent,this.element=e,CustomEvent instanceof Function||!function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}(),this.destroy=function(){var t=e.getAttribute("id"),i=n("#"+t+"_vert-marks");if(i){var r=i.parentNode;r.insertBefore(e,i.nextSibling),r.removeChild(i)}var o=n("#"+t+"_markers");if(o&&o.parentNode.removeChild(o),f?document.removeEventListener(W.down,b):(h||c)&&(document.removeEventListener("keydown",y),document.removeEventListener("keyup",w)),v){var a=n("#"+t+"_plus"),l=n("#"+t+"_minus"),u=a.parentNode;if(a.removeEventListener(W.up,A),a.removeEventListener(W.down,M),l.removeEventListener(W.up,A),l.removeEventListener(W.down,T),u.removeChild(a),u.removeChild(l),!i){var p=n("#"+t+"_button-marks");if(p){var _=p.parentNode;_.insertBefore(p.childNodes[0],p.nextSibling),_.removeChild(p)}}}document.removeEventListener(W.move,g),document.removeEventListener(W.up,m),window.removeEventListener("resize",E),window.removeEventListener("orientationchange",E),e.removeEventListener(W.down,L),s.removeEventListener(W.up,x),s.removeEventListener(W.down,k),e.removeChild(s),d.removeEventListener(W.down,L),e.removeChild(d),e.removeAttribute("style"),e.removeAttribute("data-state"),e.classList.remove("vertical");for(var C in this)delete this[C]},this.startAt=function(t){l=t;var n=e.offsetWidth,i=s.offsetWidth;0>=t?t=0:t>=100&&(t=100);var r=(n-i)*t/100+i/2,o=r-i/2;return s.style.left=o+"px",d.style.width=r+"px",p&&(d.children[0].style.opacity=t/100),this},function(n,L,_){if(e instanceof Element==!1)throw new Error("sGlide: first param expected object<Element>, found "+typeof e);if(t instanceof Object==!1)throw new Error("sGlide: second param expected object, found "+typeof t);var C=e.id;C||(C=e.id="sglide-"+Math.random(1,999)),e.innerHTML='<div class="follow_bar"></div><div class="slider_knob"></div>',"slider_knob"==e.children[0].className?(s=e.children[0],d=e.children[1]):(s=e.children[1],d=e.children[0]);var B=o({startAt:0,image:"none",height:40,width:100,unit:"%",pill:!0,snap:{marks:!1,type:!1,points:0,sensitivity:2},disabled:!1,colorShift:[],vertical:!1,showKnob:!0,buttons:!1,totalRange:[0,0],retina:!0},t);if(e.removeAttribute("style"),uAgent.match(/Android/i)||uAgent.match(/webOS/i)||uAgent.match(/iPhone/i)||uAgent.match(/iPad/i)||uAgent.match(/iPod/i)||uAgent.match(/BlackBerry/i)){f=!0,W.down="touchstart",W.up="touchend",W.move="touchmove";var P=null,S=null}else uAgent.match(/Windows Phone/i)&&(window.navigator.msPointerEnabled?(a(e,{"-ms-touch-action":"none"}),W.down="MSPointerDown",W.up="MSPointerUp",W.move="MSPointerMove"):(W.down="touchstart",W.up="touchend",W.move="touchmove"));var H=l=B.startAt,j=0,z=B.vertical,N=B.snap.points>0&&B.snap.points<=9&&B.snap.marks,R="hard"!=B.snap.type&&"soft"!=B.snap.type?!1:B.snap.type,I="#333",O=B.showKnob&&!B.disabled?"2%":"0",X=Math.round(B.height)+"px",K="inherit",V=B.pill,Y="none"!=B.image&&""!==B.image&&!B.disabled,D=window.devicePixelRatio>1&&B.retina,G=(0!==B.totalRange[0]||0!==B.totalRange[1])&&B.totalRange[0]<B.totalRange[1],F=null,J=null;if(p=B.colorShift.length>1,h="true"==e.getAttribute("data-keys"),c="shift"==e.getAttribute("data-keys"),v=B.buttons,Y){if(u=B.image,D){var U=u.split("."),q=U.length;U[q-2]=U[q-2]+"@2x",u="";for(var Q=0;q>Q;Q++)u+=U[Q]+(q-1>Q?".":"")}s.innerHTML='<img src="'+u+'" style="visibility:hidden" />',s.childNodes[0].onload=function(){D&&(this.style.width=this.offsetWidth/2+"px");var t=this.offsetHeight;if(O=this.offsetWidth+"px",K=t+"px",I="url("+u+") no-repeat",s.style.width=O,s.style.height=K,setTimeout(function(){s.style.background=I,D&&(s.style.backgroundSize="100%")},0),a(d,{height:K,"border-radius":V?t/2+"px 0 0 "+t/2+"px":"0"}),a(e,{height:K,"border-radius":V?t/2+"px":"0"}),s.removeChild(this),t>B.height){var n=(t-B.height)/2;a(e,{height:B.height+"px"}),a(s,{top:"-"+n+"px"}),a(d,{height:B.height+"px","border-radius":V?t/2+"px 0 0 "+t/2+"px":"0"})}else a(e,{overflow:"hidden"});window.dispatchEvent(Ne)}}else{var Z=B.height/2;a(e,{"border-radius":V?Z+"px":"0",overflow:"hidden"}),a(d,{"border-radius":V?Z+"px 0 0 "+Z+"px":"0"}),setTimeout(function(){s.style.backgroundColor=I,window.dispatchEvent(Ne)},0)}var $=B.unit,ee=B.width;"px"!=$&&"%"!=$?$="%":"px"==$?ee=Math.round(ee):"%"==$&&Math.round(ee)>100&&(ee=100);var te=["-webkit-","-khtml-","-moz-","-ms-","-o-",""],ne={"box-sizing":"content-box"},ie={"user-select":"none"},re={transform:"rotate(-90deg)"};if(a(e,{width:ee+$,height:X,"text-align":"left",margin:"auto",cursor:B.disabled?"default":"pointer","z-index":"997",position:"relative","-webkit-touch-callout":"none"}),a(e,r(ne),te),a(e,r(ie),te),a(s,{width:O,background:I,height:K,display:B.disabled?"none":"inline-block","font-size":"0",position:"relative","z-index":"1"}),a(s,r(ne),te),a(d,{position:B.disabled?"static":"absolute",height:"inherit",width:"0"}),a(d,r(ne),te),z)var oe=e.offsetWidth;var ae=!1,se=Math.round(B.snap.points),de=[0],le=function(t){1===se&&(se=2);for(var n=s.offsetWidth,i=e.offsetWidth-n,r=i/(se-1),o=[0],d=r;i+2>=d;)o.push(d),d+=r;for(r=100/(se-1),d=r;101>=d;)de.push(d),d+=r;if(ae=!0,N){var l=null;t?(l=_("#"+C+"_markers"),l.innerHTML=""):(e.insertAdjacentHTML("afterend",'<div id="'+C+'_markers"></div>'),l=_("#"+C+"_markers"),a(l,{width:e.offsetWidth+"px",margin:"auto","padding-left":n/2+"px","-webkit-touch-callout":"none"}),a(l,{"box-sizing":"border-box"},te),a(l,{"user-select":"none"},te));for(var u="",f=0;f<o.length;f++)u+='<div style="display:inline-block; width:0; height:5px; border-left:#333 solid 1px; position:relative; left:'+(o[f]-f)+'px; float:left"></div>';l.innerHTML=u}},ue=function(){if(N&&se>0&&10>se){var t=[e,_("#"+C+"_markers")];i(t,'<div id="'+C+'_vert-marks" style="margin:0; z-index:997; width:'+ee+$+'; -webkit-backface-visibility:hidden; -moz-backface-visibility:hidden; -ms-backface-visibility:hidden; backface-visibility:hidden"></div>'),J=_("#"+C+"_vert-marks"),a(e,{width:"100%"}),a(J,r(ne),te),a(J,r(re),te),a(J,{filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)"}),a(J,{"transform-origin":oe+"px 0"},te);for(var n=0;n<t.length;n++)a(t[n],{margin:"0"})}else a(e,{margin:"0",top:"0",left:"0"}),a(e,{"backface-visibility":"hidden"},te),a(e,r(re),te),a(e,{filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)"}),a(e,{"transform-origin":oe+"px 0"},te);e.classList.add("vertical")},fe=function(){pe=s.offsetWidth/e.offsetWidth*50;var t="; z-index:1000; position:relative; top:30px",n='<div class="sglide-buttons" id="'+C+'_plus" style="display:inline-block; cursor:pointer'+(z?t:"")+'">&nbsp;+&nbsp;</div>',o='<div class="sglide-buttons" id="'+C+'_minus" style="display:inline-block; cursor:pointer'+(z?t:"")+'">&nbsp;&minus;&nbsp;</div>';if(N){var d=null;if(z)d=_("#"+C+"_vert-marks");else{a(e,{width:"auto"});var l=z?[_("#"+C+"_vert-marks")]:[_("#"+C),_("#"+C+"_markers")];i(l,'<div id="'+C+'_button-marks" style="display:inline-block; vertical-align:middle; width:'+ee+$+'"></div>'),d=_("#"+C+"_button-marks")}d.insertAdjacentHTML("afterend",n),d.insertAdjacentHTML("beforebegin",o)}else a(e,{display:z?"block":"inline-block","vertical-align":"middle"}),e.insertAdjacentHTML("afterend",n),e.insertAdjacentHTML("beforebegin",o);var u=_("#"+C+"_plus"),f=_("#"+C+"_minus");a(f,r(ie),te),a(u,r(ie),te),B.disabled||(u.addEventListener(W.down,M),u.addEventListener(W.up,ce),f.addEventListener(W.down,T),f.addEventListener(W.up,ce))},ve=function(n,i){null!==l&&H!==l&&(H=l),l=null;var r=H;if(be)for(var o=100/(B.snap.points-1),a=o,u=0;u<B.snap.points;u++){if(o>=H){H=">"===n?Math.round(o)>Math.round(H)?o:o+a:o-a;break}o+=a}else">"===n?H+=i?1:10:H-=i?1:10;r=H,H+pe>100?(H=100,r=100):0>H-pe&&(H=0,r=0);var f=(e.offsetWidth-s.offsetWidth)*r/100+s.offsetWidth/2,v=f-s.offsetWidth/2;s.style.left=v+"px",d.style.width=f+"px",p&&He({percent:r}),t.onButton&&t.onButton(Pe(Be(v)))},he=function(e){var t=setInterval(function(){me?ve(e,!0):clearInterval(t)},be?201:10)},ce=function(){me=!1,clearTimeout(ge)},pe=0,me=!1,ge=null,be=B.snap.points>0&&B.snap.points<=9&&("hard"===R||"soft"===R);A=ce,M=function(){we(">")},T=function(){we("<")};var we=function(e){me=!0,ve(e),ge=setTimeout(function(){he(e)},500)},ye=!1;k=function(){ye=!0,e.setAttribute("data-state","active")},x=function(){ye=!1},s.addEventListener(W.down,k),s.addEventListener(W.up,x);var xe="s-1",ke=function(t,n){if(se>0&&10>se){var i=B.snap.sensitivity;if(i||"hard"===R||"soft"===R){for(var r=s.offsetWidth,o=e.offsetWidth,a=(i&&i>0&&4>i?5*(i+1):15)-3,l=[],u=0;u<de.length;u++)l.push((o-r)*de[u]/100);for(var f=null,v=0,h=0;h<l.length;h++)(null===f||Math.abs(l[h]-n)<Math.abs(f-n))&&(f=l[h],v=de[h]);if("drag"!==t)return s.style.left=f+"px",d.style.width=f+r/2+"px",f;"hard"===R?(s.style.left=f+"px",d.style.width=f+r/2+"px",Ee(f,v)):Math.round(Math.abs(f-n))<a?(s.style.left=f+"px",d.style.width=f+r/2+"px",Ee(f,v)):xe="s-1"}}},Ee=function(e){t.onSnap&&"s"+e!==xe&&(xe="s"+e,t.onSnap(Pe(Be(e))))};if(!f&&(h||c)){var Le,Ae=!1,Me=z?40:37,Te=z?38:39;y=function(e){if(!Ae&&!B.disabled){if(window.event){if(Le=window.event.keyCode,c&&!window.event.shiftKey)return!1}else if(e&&(Le=e.which,c&&!e.shiftKey))return!1;Le===Me?(T(),Ae=!0):Le===Te&&(M(),Ae=!0)}},w=function(){Ae=!1,ce()},n.addEventListener("keydown",y),n.addEventListener("keyup",w)}if(f&&(b=function(e){P=e.targetTouches[0].pageX,S=e.targetTouches[0].pageY},n.addEventListener(W.down,b)),(f||uAgent.match(/Windows Phone/i))&&window.addEventListener("orientationchange",E),g=function(n){if(ye){n=n||event;var i=null,r=e.offsetWidth,o=s.offsetWidth;if(z){window.navigator.msPointerEnabled&&null===F?F=e.getBoundingClientRect().top:null!==J&&null===F&&(F=J.offsetTop);var a=(null!==F?F:e.offsetTop)+r;f?(S=n.targetTouches[0].pageY,i=a-S):i=a-n.pageY}else f?(P=n.targetTouches[0].pageX,i=P-e.offsetLeft):i=n.pageX-e.offsetLeft;var l=o/2,u=i-l;n.returnValue&&(n.returnValue=!1),l>=i?(s.style.left="0",d.style.width=l+"px"):i>=r-l?(s.style.left=r-o+"px",d.style.width=r-l+"px"):(s.style.left=i-l+"px",d.style.width=i+"px",R&&"hard"!==R||ke("drag",u)),j=s.offsetLeft;var v=e.getAttribute("data-state");t.drag&&"active"===v&&t.drag(Pe(Be(j))),p&&"active"===v&&He(Be(j))}},m=function(n){if(ye=!1,"active"===e.getAttribute("data-state")){n=n||event;var i=s.offsetLeft;j=se>0&&10>se&&("soft"===R||"hard"===R)?ke("drop",i):0>i?0:i,t.drop&&t.drop(Pe(Be(j))),t.drag&&t.drag(Pe(Be(j))),e.setAttribute("data-state","inactive"),p&&He(Be(j))}me&&ce()},E=function(){L.startAt(l),N&&le(!0)},n.addEventListener(W.move,g),n.addEventListener(W.up,m),window.addEventListener("resize",E),G)var We=B.totalRange[0],_e=B.totalRange[1]-We;var Ce={percent:null},Be=function(t){var n=0,i=t/(e.offsetWidth-s.offsetWidth)*100;return i=Math.min(i,100),G&&(n=_e*i/100+We),H=l=i,Ce.percent=i,G&&(Ce.custom=n),Ce},Pe=function(t){return t.id=C,t.el=e,t},Se=function(){e.offsetHeight/2;a(d,{overflow:"hidden","background-color":B.colorShift[0]}),d.innerHTML='<div style="opacity:'+B.startAt/100+"; height:100%; background-color:"+B.colorShift[1]+'; "></div>'},He=function(e){d.children[0].style.opacity=e.percent/100},je=function(t){if(t=t||event,t.returnValue&&(t.returnValue=!1),ye=!0,e.setAttribute("data-state","active"),!f&&"hard"!==R){var n=e.offsetWidth,i=s.offsetWidth,r=null;if(z){window.navigator.msPointerEnabled&&null===F?F=e.getBoundingClientRect().top:null!==J&&null===F&&(F=J.offsetTop);var o=(null!==F?F:e.offsetTop)+n;r=o-(t.pageY-2)}else r=t.pageX-e.offsetLeft;var a=r-i/2;0>a?(a=0,s.style.left="0"):a>=n-i&&(a=n-i,s.style.left=n-i+"px"),s.style.left=a+"px",d.style.width=a+i/2+"px",p&&He(Be(a))}};B.disabled||(e.addEventListener(W.down,je),d.addEventListener(W.down,je));var ze=function(){var e=l,n=Pe({percent:e});se>0&&10>se&&le(),z&&ue(),v&&fe(),p&&Se(),t.onload&&t.onload(n),L.startAt(e),window.removeEventListener("makeready."+C,ze)},Ne=new CustomEvent("makeready."+C);window.addEventListener("makeready."+C,ze)}(document,this,n)}